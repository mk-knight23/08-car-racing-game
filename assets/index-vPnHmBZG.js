(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const c of n)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function e(n){const c={};return n.integrity&&(c.integrity=n.integrity),n.referrerPolicy&&(c.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?c.credentials="include":n.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(n){if(n.ep)return;n.ep=!0;const c=e(n);fetch(n.href,c)}})();const p=document.querySelector(".Score"),u=document.querySelector(".highscore"),f=document.querySelector(".StartScreen"),l=document.querySelector(".GameArea");let a=parseInt(localStorage.getItem("mk_car_highscore")||"0");u.innerHTML=`Highscore: ${a}`;f.addEventListener("click",v);let t={speed:8,Score:0},i={ArrowUp:!1,ArrowDown:!1,ArrowLeft:!1,ArrowRight:!1};document.addEventListener("keydown",h);document.addEventListener("keyup",m);function h(r){i.hasOwnProperty(r.key)&&(r.preventDefault(),i[r.key]=!0)}function m(r){i.hasOwnProperty(r.key)&&(r.preventDefault(),i[r.key]=!1)}const g=()=>{const r=document.createElement("div");r.className="controls-mobile",r.innerHTML=`
        <div class="btn-ctrl" id="left-btn">‚Üê</div>
        <div class="btn-ctrl" id="right-btn">‚Üí</div>
    `,document.body.appendChild(r);const o=document.getElementById("left-btn"),e=document.getElementById("right-btn"),s=(n,c)=>d=>{d.preventDefault(),i[n]=c};o.addEventListener("touchstart",s("ArrowLeft",!0)),o.addEventListener("touchend",s("ArrowLeft",!1)),e.addEventListener("touchstart",s("ArrowRight",!0)),e.addEventListener("touchend",s("ArrowRight",!1))};g();function S(r,o){const e=r.getBoundingClientRect(),s=o.getBoundingClientRect();return!(e.bottom<s.top||e.top>s.bottom||e.right<s.left||e.left>s.right)}function b(){document.querySelectorAll(".lines").forEach(function(o){o.y>=750&&(o.y-=750),o.y+=t.speed,o.style.top=o.y+"px"})}function L(){t.Start=!1,f.classList.remove("hide"),t.Score>a&&(a=t.Score,localStorage.setItem("mk_car_highscore",a.toString()),u.innerHTML=`Highscore: ${a}`),f.innerHTML=`
        <p>
            üî• GAME OVER üî•<br>
            SCORE: ${t.Score}<br>
            HIGHSCORE: ${a}<br><br>
            <span style="font-size: 1rem; opacity: 0.8">Click to restart</span>
        </p>
    `}function w(r){document.querySelectorAll(".enemy").forEach(function(e){S(r,e)&&L(),e.y>=750&&(e.y-=800,e.style.left=Math.floor(Math.random()*(l.offsetWidth-60))+"px"),e.y+=t.speed,e.style.top=e.y+"px"})}function y(){let r=document.querySelector(".car"),o=l.getBoundingClientRect();t.Start&&(b(),w(r),i.ArrowUp&&t.y>100&&(t.y-=t.speed),i.ArrowDown&&t.y<o.height-150&&(t.y+=t.speed),i.ArrowLeft&&t.x>0&&(t.x-=t.speed),i.ArrowRight&&t.x<o.width-60&&(t.x+=t.speed),r.style.top=t.y+"px",r.style.left=t.x+"px",window.requestAnimationFrame(y),t.Score++,p.innerHTML="Score: "+t.Score,t.Score%500===0&&(t.speed+=.5))}function v(){f.classList.add("hide"),l.innerHTML="",t.Start=!0,t.Score=0,t.speed=8,window.requestAnimationFrame(y);for(let o=0;o<5;o++){let e=document.createElement("div");e.setAttribute("class","lines"),e.y=o*150,e.style.top=e.y+"px",l.appendChild(e)}let r=document.createElement("div");r.setAttribute("class","car"),l.appendChild(r),t.x=r.offsetLeft,t.y=r.offsetTop;for(let o=0;o<3;o++){let e=document.createElement("div");e.setAttribute("class","enemy"),e.y=(o+1)*350*-1,e.style.top=e.y+"px",e.style.backgroundColor=A(),e.style.left=Math.floor(Math.random()*(l.offsetWidth-60))+"px",l.appendChild(e)}}function A(){const r=["#f59e0b","#10b981","#3b82f6","#8b5cf6","#ec4899"];return r[Math.floor(Math.random()*r.length)]}
