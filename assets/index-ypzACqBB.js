(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const c of s)if(c.type==="childList")for(const f of c.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&n(f)}).observe(document,{childList:!0,subtree:!0});function r(s){const c={};return s.integrity&&(c.integrity=s.integrity),s.referrerPolicy&&(c.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?c.credentials="include":s.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function n(s){if(s.ep)return;s.ep=!0;const c=r(s);fetch(s.href,c)}})();const h=document.querySelector(".Score"),p=document.querySelector(".highscore"),d=document.querySelector(".StartScreen"),l=document.querySelector(".GameArea");let o={Start:!1,Score:0,speed:8,x:0,y:0},i={ArrowUp:!1,ArrowDown:!1,ArrowLeft:!1,ArrowRight:!1},u=0,a=parseInt(localStorage.getItem("car_racing_highscore")||"0",10);p.textContent=`Highscore: ${a}`;d.addEventListener("click",x);document.addEventListener("keydown",e=>{i.hasOwnProperty(e.key)&&(e.preventDefault(),i[e.key]=!0)});document.addEventListener("keyup",e=>{i.hasOwnProperty(e.key)&&(e.preventDefault(),i[e.key]=!1)});const g=()=>{const e=document.createElement("div");e.className="controls-mobile",e.innerHTML=`
        <div class="btn-ctrl up" id="up-btn">↑</div>
        <div class="btn-ctrl down" id="down-btn">↓</div>
        <div class="btn-ctrl left" id="left-btn">←</div>
        <div class="btn-ctrl right" id="right-btn">→</div>
    `,document.body.appendChild(e);const t=(r,n)=>{const s=document.getElementById(r);s.addEventListener("touchstart",c=>{c.preventDefault(),i[n]=!0}),s.addEventListener("touchend",c=>{c.preventDefault(),i[n]=!1})};t("left-btn","ArrowLeft"),t("right-btn","ArrowRight"),t("up-btn","ArrowUp"),t("down-btn","ArrowDown")};g();function b(e,t){const r=e.getBoundingClientRect(),n=t.getBoundingClientRect();return!(r.bottom<n.top||r.top>n.bottom||r.right<n.left||r.left>n.right)}function w(){document.querySelectorAll(".lines").forEach(t=>{const r=t;(r.y||0)>=800&&(r.y=(r.y||0)-800),r.y=(r.y||0)+o.speed,r.style.top=`${r.y}px`})}function S(e){document.querySelectorAll(".enemy").forEach(r=>{const n=r;if(b(e,n)){v();return}(n.y||0)>=l.offsetHeight&&(n.y=-300,n.style.left=`${Math.floor(Math.random()*(l.offsetWidth-60))}px`,n.style.backgroundColor=y()),n.y=(n.y||0)+o.speed,n.style.top=`${n.y}px`})}function m(){if(!o.Start)return;const e=document.querySelector(".car"),t=l.getBoundingClientRect();w(),S(e),i.ArrowUp&&o.y>80&&(o.y-=o.speed),i.ArrowDown&&o.y<t.height-130&&(o.y+=o.speed),i.ArrowLeft&&o.x>0&&(o.x-=o.speed),i.ArrowRight&&o.x<t.width-55&&(o.x+=o.speed),e.style.top=`${o.y}px`,e.style.left=`${o.x}px`,o.Score++,h.textContent=`Score: ${o.Score}`,o.Score%500===0&&(o.speed+=.5),u=requestAnimationFrame(m)}function v(){o.Start=!1,cancelAnimationFrame(u);const e=document.querySelector(".car");e&&e.classList.add("collision"),o.Score>a&&(a=o.Score,localStorage.setItem("car_racing_highscore",a.toString()),p.textContent=`Highscore: ${a}`),d.innerHTML=`
        <div class="max-w-md p-10 rounded-[3rem] bg-gradient-to-br from-red-600 to-orange-600 shadow-2xl shadow-red-500/20 border border-white/10">
            <h2 class="text-4xl font-black mb-6 tracking-tighter uppercase">Game Over</h2>
            <p class="text-lg font-medium leading-relaxed opacity-90 mb-4">
                Score: <span class="font-bold text-white">${o.Score}</span>
            </p>
            <p class="text-lg font-medium leading-relaxed opacity-90 mb-8">
                Best: <span class="font-bold text-yellow-300">${a}</span>
            </p>
            <div class="px-8 py-4 bg-white/10 rounded-2xl font-black uppercase tracking-widest text-sm hover:bg-white/20 transition-all cursor-pointer">
                Race Again
            </div>
        </div>
    `,d.classList.remove("hide")}function x(){d.classList.add("hide"),l.innerHTML="",o={Start:!0,Score:0,speed:8,x:0,y:0},i={ArrowUp:!1,ArrowDown:!1,ArrowLeft:!1,ArrowRight:!1};for(let t=0;t<6;t++){const r=document.createElement("div");r.className="lines",r.y=t*150,r.style.top=`${r.y}px`,l.appendChild(r)}const e=document.createElement("div");e.className="car",l.appendChild(e),o.x=e.offsetLeft,o.y=e.offsetTop;for(let t=0;t<3;t++)A(t*300*-1);u=requestAnimationFrame(m)}function A(e){const t=document.createElement("div");t.className="enemy",t.y=e,t.style.top=`${e}px`,t.style.backgroundColor=y(),t.style.left=`${Math.floor(Math.random()*(l.offsetWidth-60))}px`,l.appendChild(t)}function y(){const e=["#f59e0b","#10b981","#3b82f6","#8b5cf6","#ec4899","#06b6d4"];return e[Math.floor(Math.random()*e.length)]}
